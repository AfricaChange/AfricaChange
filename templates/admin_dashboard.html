{% extends 'base_admin.html' %}
{% block content %}

<div class="max-w-6xl mx-auto p-6 bg-white rounded-xl shadow-lg">

  <h1 class="text-3xl font-bold text-blue-600 mb-8 text-center">
    âš™ï¸ Tableau de bord administrateur
  </h1>

  <!-- ===================== -->
  <!-- ğŸ“Š STATISTIQUES GLOBALES -->
  <!-- ===================== -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-10 text-center">
    <div class="bg-blue-100 p-4 rounded-lg">
      <p class="text-gray-600">Utilisateurs inscrits</p>
      <p class="text-2xl font-bold text-blue-700">
        {{ total_users or 0 }}
      </p>
    </div>

    <div class="bg-green-100 p-4 rounded-lg">
      <p class="text-gray-600">Fonds totaux</p>
      <p class="text-2xl font-bold text-green-700">
        {{ (total_fonds or 0) | round(2) }} FCFA
      </p>
    </div>

    <div class="bg-yellow-100 p-4 rounded-lg">
      <p class="text-gray-600">Transactions</p>
      <p class="text-2xl font-bold text-yellow-700">
        {{ total_transactions or 0 }}
      </p>
    </div>
  </div>

  <!-- ===================== -->
  <!-- ğŸ“¡ STATUTS TEMPS RÃ‰EL -->
  <!-- ===================== -->
  <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-10 text-center">

    <div class="bg-yellow-100 p-4 rounded">
      <p class="text-sm">â³ Paiements en attente</p>
      <p class="text-2xl font-bold">{{ tx_pending or 0 }}</p>
    </div>

    <div class="bg-green-100 p-4 rounded">
      <p class="text-sm">âœ… Paiements validÃ©s</p>
      <p class="text-2xl font-bold">{{ tx_valid or 0 }}</p>
    </div>

    <div class="bg-red-100 p-4 rounded">
      <p class="text-sm">â›” Paiements bloquÃ©s</p>
      <p class="text-2xl font-bold">{{ tx_blocked or 0 }}</p>
    </div>

    <div class="bg-gray-100 p-4 rounded">
      <p class="text-sm">âŒ Paiements Ã©chouÃ©s</p>
      <p class="text-2xl font-bold">{{ tx_failed or 0 }}</p>
    </div>

    <div class="bg-blue-100 p-4 rounded">
      <p class="text-sm">ğŸ•’ Conversions non payÃ©es</p>
      <p class="text-2xl font-bold">{{ conv_pending or 0 }}</p>
    </div>

  </div>

  <!-- ===================== -->
  <!-- ğŸš¨ FINANCE â€“ ACTIONS PRIORITAIRES -->
  <!-- ===================== -->
  <div class="bg-red-50 border border-red-200 p-6 rounded-lg mb-10">
    <h2 class="text-xl font-semibold text-red-700 mb-4">
      ğŸš¨ Supervision financiÃ¨re
    </h2>

    <div class="flex flex-wrap gap-4">

      <a href="{{ url_for('admin.transactions', status='bloque') }}"
         class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 flex items-center gap-2">
        â›” Transactions bloquÃ©es
        <span class="bg-white text-red-700 text-xs px-2 py-1 rounded-full font-bold">
          {{ tx_blocked or 0 }}
        </span>
      </a>

      <a href="{{ url_for('admin.transactions', status='en_attente') }}"
         class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 flex items-center gap-2">
        â³ Paiements en attente
        <span class="bg-white text-yellow-700 text-xs px-2 py-1 rounded-full font-bold">
          {{ tx_pending or 0 }}
        </span>
      </a>

      <a href="{{ url_for('admin.risques') }}"
         class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 flex items-center gap-2">
        âš ï¸ Alertes risques
      </a>

      <a href="{{ url_for('admin.transactions') }}"
         class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
        ğŸ§¾ GÃ©rer les transactions
      </a>

    </div>
  </div>

  <!-- ===================== -->
  <!-- ğŸ§­ ADMINISTRATION -->
  <!-- ===================== -->
  <div class="bg-gray-50 p-6 rounded-lg shadow-inner mb-10">
    <h2 class="text-xl font-semibold text-gray-700 mb-4 text-center">
      ğŸ§­ Outils dâ€™administration
    </h2>

    <div class="flex flex-wrap justify-center gap-4">
      <a href="{{ url_for('admin.gerer_taux') }}"
         class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600">
        ğŸ” GÃ©rer les taux
      </a>

      <a href="{{ url_for('admin.comptes_systeme') }}"
         class="bg-indigo-500 text-white px-4 py-2 rounded hover:bg-indigo-600">
        ğŸ¦ Comptes systÃ¨mes
      </a>

      <a href="{{ url_for('admin.admin_maintenance') }}"
         class="bg-gray-700 text-white px-4 py-2 rounded hover:bg-gray-800">
        ğŸ› ï¸ Mode maintenance
      </a>
    </div>
  </div>

  <!-- ===================== -->
  <!-- ğŸ“Š REPORTING -->
  <!-- ===================== -->
  <div class="bg-blue-50 p-6 rounded-lg shadow-inner mb-10">
    <h2 class="text-xl font-semibold text-blue-700 mb-4 text-center">
      ğŸ“Š Reporting & exports
    </h2>

    <div class="flex flex-wrap justify-center gap-4">
      <a href="{{ url_for('admin.liste_conversions') }}"
         class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">
        ğŸ’± Conversions
      </a>

      <a href="{{ url_for('admin.historique_envois') }}"
         class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
        ğŸ“ˆ Historique des envois
      </a>

      <a href="{{ url_for('admin.export_conversions') }}"
         class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
        ğŸ“¤ Export Excel
      </a>
    </div>
  </div>

</div>
{% endblock %}
