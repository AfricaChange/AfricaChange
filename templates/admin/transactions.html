{% extends "admin/base_admin.html" %}
{% block content %}

<h1 class="text-2xl font-bold mb-4">ğŸ’³ Transactions LIVE</h1>

<!-- Filtres -->
<form method="get" class="flex gap-3 mb-6 text-sm">
  <select name="status" class="border rounded px-2 py-1">
    <option value="">Statut</option>
    <option value="en_attente">En attente</option>
    <option value="valide">ValidÃ©e</option>
    <option value="bloque">BloquÃ©e</option>
    <option value="echoue">Ã‰chouÃ©e</option>
  </select>

  <select name="provider" class="border rounded px-2 py-1">
    <option value="">Fournisseur</option>
    <option>Orange Money</option>
    <option>Wave</option>
    <option>Simulation</option>
    <option>admin</option>
  </select>

  <input name="q" placeholder="RÃ©fÃ©rence"
         class="border rounded px-2 py-1">

  <button class="bg-blue-600 text-white px-4 py-1 rounded">
    Filtrer
  </button>
</form>

<!-- Table -->
<table class="w-full bg-white shadow rounded text-sm">
  <thead class="bg-gray-100">
    <tr>
      <th class="p-2">Date</th>
      <th class="p-2">RÃ©fÃ©rence</th>
      <th class="p-2">Montant</th>
      <th class="p-2">Statut</th>
      <th class="p-2">Provider</th>
      <th class="p-2 text-center">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for tx in transactions %}
    <tr class="border-t hover:bg-gray-50">
      <td class="p-2 text-xs">{{ tx.date_transaction.strftime('%d/%m %H:%M') }}</td>
      <td class="p-2 font-mono">{{ tx.reference }}</td>
      <td class="p-2 font-semibold">{{ tx.montant }} XOF</td>
      <td class="p-2">{{ tx.statut }}</td>
      <td class="p-2">{{ tx.fournisseur }}</td>
      <td class="p-2 text-center space-x-1">
        <button onclick="adminAction('validate','{{ tx.reference }}')" class="text-green-600">âœ”</button>
        <button onclick="adminAction('block','{{ tx.reference }}')" class="text-red-600">â›”</button>
        <button onclick="adminRefund('{{ tx.reference }}')" class="text-yellow-600">ğŸ’¸</button>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
